{% extends "universalLayout.html" %}
{% block title %}Delete Journal{% endblock %}

{% block content %}
<h2>Delete Journal</h2>
<p class="text-muted">Enter the Journal ID to delete it permanently from the database.</p>

<form id="deleteJournalForm" class="row g-3">
    <div class="col-md-4">
        <label class="form-label">Journal ID</label>
        <input type="text" id="journalId" class="form-control" placeholder="J001" required>
    </div>

    <div class="col-12">
        <button type="submit" class="btn btn-danger">Delete Journal</button>
    </div>
</form>

<!-- Response Section -->
<div id="responseBox" class="mt-4"></div>

<script>
    document.getElementById("deleteJournalForm").addEventListener("submit", async function (e) {
        e.preventDefault();

        const journalId = document.getElementById("journalId").value.trim();
        if (!journalId) {
            alert("Please enter Journal ID.");
            return;
        }

        showLoading();

        try {
            const response = await fetch(`/delete/journalInputData/${journalId}`, {
                method: "DELETE"
            });

            const result = await response.json();
            document.getElementById("responseBox").innerHTML = `
          <div class="alert alert-${response.ok ? 'success' : 'danger'}">
            ${JSON.stringify(result)}
          </div>`;
        } catch (error) {
            document.getElementById("responseBox").innerHTML = `
          <div class="alert alert-danger">Error: ${error}</div>`;
        }
    });
</script>
{% endblock %}